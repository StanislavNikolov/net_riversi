<!DOCTYPE html>
<html>
	<head>
		<style>
		</style>
	</head>

	<body>
		<script>
			const fmtDate = str => {
				const date = new Date(str);

				const hour = String(date.getHours()).padStart(2, '0');
				const minute = String(date.getMinutes()).padStart(2, '0');
				const seconds = String(date.getSeconds()).padStart(2, '0');

				const month = String(date.getMonth()+1).padStart(2, '0');
				const day = String(date.getDate()).padStart(2, '0');

				return `${hour}:${minute}:${seconds} ${date.getFullYear()}-${month}-${day}`;
			};

			const htmlToElement = html => {
				var template = document.createElement('template');
				html = html.trim(); // Never return a text node of whitespace as the result
				template.innerHTML = html;
				return template.content.childNodes;
			};

			fetch('/api/games')
				.then(resp => resp.json())
				.then(games => {
					if(games == null) {
						return;
					}
					console.log(games);

					for (const game of games) {
						const html = `
							${fmtDate(game.startedAt)}
							<a href="/view_game.html?id=${game.id}">${game.player0} vs. ${game.player1}</a>
							<br>
						`;
						//console.log(html);
						document.body.insertAdjacentHTML('beforeend', html);
						//document.body.appendChild(htmlToElement(html));
					}
				})
		</script>
	</body>
</html>
